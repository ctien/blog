webpackJsonp([0xf5c3b7cc0e36],{1408:function(n,s){n.exports={data:{markdownRemark:{html:'<p>Đây là những chỉ dẫn của <a href="https://www.appnexus.com/">AppNexus</a> để tối ưu redux với lượng dữ liệu khủng</p>\n<h1 id="lưu-dữ-liệu-với-chỉ-mục-truy-cập-bằng-selector"><a href="#l%C6%B0u-d%E1%BB%AF-li%E1%BB%87u-v%E1%BB%9Bi-ch%E1%BB%89-m%E1%BB%A5c-truy-c%E1%BA%ADp-b%E1%BA%B1ng-selector" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lưu dữ liệu với chỉ mục. Truy cập bằng selector</h1>\n<p>Cách cấu trúc dữ liệu sẽ ảnh hưởng nhiều đến performance và việc tổ chức ứng dụng. Lưu dữ liệu trả về từ API theo chỉ mục (index) mang lại nhiều lợi ích. Nói nôm na, lưu theo chỉ mục tức là theo dạng object, theo cặp key-value. Tác giả Redux ( Dan Abramov ) có trình bài vấn đề này <a href="https://egghead.io/lessons/javascript-redux-persisting-the-state-to-the-local-storage">ở đây</a></p>\n<p>Tưởng tượng chúng ta có một mảng object, được <code class="language-text">fetch</code> từ REST API. Giả dụ chúng ta quyết định lưu toàn bộ xuống <em>store</em> như nó trả về. Khi chúng ta muốn lấy một object cụ thể nào đó? Phải loop qua toàn bộ, rồi muốn lưu danh sách các user đang được chọn và chưa được chọn?</p>\n<p>Để tránh tình trạng này, lưu nó dạng chỉ mục, viết lại reducer trước khi lưu xuống store, cục dữ liệu mong muốn, (bạn nào sử dụng FireStore, NoSQL database sẽ hiểu liền tại sao)</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token punctuation">{</span>\n  <span class="token string">"usersById"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    <span class="token number">123</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n      id<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span>\n      name<span class="token punctuation">:</span> <span class="token string">"Jane Doe"</span><span class="token punctuation">,</span>\n      email<span class="token punctuation">:</span> <span class="token string">"jdoe@example.com"</span><span class="token punctuation">,</span>\n      phone<span class="token punctuation">:</span> <span class="token string">"555-555-5555"</span><span class="token punctuation">,</span>\n      <span class="token operator">...</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token operator">...</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>Dữ liệu được cấu trúc như thế này thì giải quyết vấn đề bằng cách nào? Ví dụ, chúng ta muốn truy cập đến một user object cụ thể</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> user <span class="token operator">=</span> state<span class="token punctuation">.</span>usersById<span class="token punctuation">[</span>userId<span class="token punctuation">]</span></code></pre>\n      </div>\n<p><strong>Không cần loop, sử dụng key để lấy trực tiếp đến object mong muốn</strong></p>\n<p>Câu hỏi tiếp theo, ủa vậy sao render được danh sách user nếu dữ liệu tổ chức như vậy. Để làm chuyện đó, chúng ta viết một hàm (hàm như vậy gọi là selector) đơn giản bằng <code class="language-text">Object.keys()</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">getUsers</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>userById<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>usersById<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>id <span class="token operator">=></span> usersById<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>Thêm một hàm nữa cho việc lấy ra danh sách user với tham số truyền vào là mảng user id</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">getSelectedUsers</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> selectedUserIds<span class="token punctuation">,</span> usersById <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> selectedUserIds<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=></span> usersById<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre>\n      </div>\n<p>Đừng lo chuyện phải viết quá nhiều hàm, viết như vậy càng dễ cho sau này maintain. Trường hợp cái model user có bị thay đổi đi nữa, chúng ta không cần phải update cả trăm cái view đang sử dụng dữ liệu này, đơn giản là update những hàm selector này lại, re-format dữ liệu một tí là xong.</p>\n<h1 id="tách-state-chuẩn-ở-view-và-edit"><a href="#t%C3%A1ch-state-chu%E1%BA%A9n-%E1%BB%9F-view-v%C3%A0-edit" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tách state chuẩn ở view và edit</h1>\n<p>Những dữ liệu từ REST API trả về được xem là <strong>state chuẩn</strong>,</p>',timeToRead:2,excerpt:"Đây là những chỉ dẫn của  AppNexus  để tối ưu redux với lượng dữ liệu khủng Lưu dữ liệu với chỉ mục. Truy cập bằng selector Cách cấu trúc dữ…",frontmatter:{title:"Làm việc với Redux trong ứng dụng lớn",cover:"",date:"2018-10-04",category:null,tags:["javascript","react"],desc:"Cùng thảo luận xung quanh vấn đề ứng dụng thiên về dữ liệu lớn, rất lớn"},fields:{slug:"/2018-10-04-huong-dan-redux-voi-ung-dung-lon"}}},pathContext:{slug:"/2018-10-04-huong-dan-redux-voi-ung-dung-lon",prev:!1,next:{frontmatter:{title:"Xử lý tập dữ liệu lớn trong React",desc:"Tình huống: bạn có một table với rất nhiều dữ liệu đổ vào, nếu bạn thấy component đó render chậm trên màn hình, đó là lúc cần tái cấu trúc",type:"post",category:null,tags:["javascript","react"],date:"2018-10-03",cover:""},fields:{slug:"/2018-10-03-huong-dan-reactjs-table-du-lieu-lon"}}}}}});
//# sourceMappingURL=path---2018-10-04-huong-dan-redux-voi-ung-dung-lon-c2883bfd2f61c27a5e63.js.map