{"version":3,"sources":["webpack:///path---2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3-61aad2c28d7892c0a710.js","webpack:///./.cache/json/2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3.json"],"names":["webpackJsonp","./node_modules/json-loader/index.js!./.cache/json/2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3.json","module","exports","data","markdownRemark","html","frontmatter","date","path","tags","title","desc","pathContext","prev","excerpt","id","timeToRead","next"],"mappings":"AAAAA,cAAc,KAERC,qHACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA,wvaAA4qaC,aAAkbC,KAAA,eAAAC,KAAA,+DAAAC,MAAA,wBAAAC,MAAA,qDAAAC,KAAA,6EAA4QC,aAAgBC,MAAQC,QAAA,gQAAAT,KAAA,qrUAAo3UU,GAAA,yGAAAC,WAAA,EAAAV,aAAooBC,KAAA,2BAAAC,KAAA,sCAAAC,MAAA,sBAAAC,MAAA,4BAAgJO,MAASH,QAAA,gQAAAT,KAAA;AAAqmaU,GAAA,2HAAAC,WAAA,EAAAV,aAAyvBC,KAAA,2BAAAC,KAAA,wDAAAC,MAAA,wBAAAC,MAAA","file":"path---2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3-61aad2c28d7892c0a710.js","sourcesContent":["webpackJsonp([42],{\n\n/***/ \"./node_modules/json-loader/index.js!./.cache/json/2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3.json\":\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h1>Trong Series này</h1>\\n<ol>\\n<li><a href=\\\"2018-05-25-viet-code-javascript-tot-hon-voi-webpack\\\">Webpack là gì và tại sao ta phải xài nó</a></li>\\n<li><a href=\\\"2018-05-27-huong-dan-webpack-4-cho-nguoi-moi-bat-dau\\\">Dùng Loaders, code slitting trong webpack</a></li>\\n<li><a href=\\\"2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3\\\">Plugins, Development Server</a></li>\\n</ol>\\n<p>Trong khi loader sẽ tiến hành transform từng file một, <strong>plugins</strong> sẽ tiến hành xử lý trong từng đoạn code</p>\\n<p>Giờ chúng ta đã biết cách  bundle code, cài thêm các module bổ sung cho webpack, cách thêm các static asset, file bundle chúng ta sẽ bự dần bự dần - không sớm thì muộn thôi. Plugins sẽ giúp chúng ta tách phần code một cách thông mình hơn, optimize hơn cho production</p>\\n<p>Thật ra ma nói, khi sử dụng <code class=\\\"language-text\\\">mode</code> development/production trong webpack chúng ta đã sử dụng rất nhiều plugin mặc định trong webpack</p>\\n<p><em>develoment</em></p>\\n<ul>\\n<li>lúc này giá trị biến <code class=\\\"language-text\\\">process.env.NODE_ENV</code> sẽ bằng 'development'</li>\\n<li>dùng NamedModulesPlugin</li>\\n</ul>\\n<p><em>production</em></p>\\n<ul>\\n<li><code class=\\\"language-text\\\">process.env.NODE_ENV</code> sẽ bằng 'production'</li>\\n<li>UglifyJsPlugin</li>\\n<li>ModuleConcatenationPlugin</li>\\n<li>NoEmitOnErrorsPlugin</li>\\n</ul>\\n<p>Trước khi thêm một số plugin khác, chúng ta sẽ tách file config ra thành 2, để sau này chúng ta apply các plugin khác nhau cho các mode chạy khác nhau</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"><span class=\\\"token deleted\\\">- webpack.config.js</span>\\n<span class=\\\"token inserted\\\">+ webpack.common.js</span>\\n<span class=\\\"token inserted\\\">+ webpack.dev.js</span>\\n<span class=\\\"token inserted\\\">+ webpack.prod.js</span></code></pre>\\n      </div>\\n<p>Cài thêm plugin là <code class=\\\"language-text\\\">webpack-merge</code> để trộn file <em>webpack.common.js</em> với một trong 2 file webpack.dev.js hoặc webpack.prod.js</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save-dev webpack-merge</code></pre>\\n      </div>\\n<p><strong>webpack.dev.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">const</span> merge <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'webpack-merge'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> common <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./webpack.common.js'</span><span class=\\\"token punctuation\\\">)</span>\\n\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">merge</span><span class=\\\"token punctuation\\\">(</span>common<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n  mode<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'development'</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p><strong>webpack.prod.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">const</span> merge <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'webpack-merge'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> common <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./webpack.common.js'</span><span class=\\\"token punctuation\\\">)</span>\\n\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">merge</span><span class=\\\"token punctuation\\\">(</span>common<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n  mode<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'production'</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p><strong>package.json</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">  \\\"scripts\\\": {\\n<span class=\\\"token deleted\\\">-    \\\"develop\\\": \\\"webpack --watch --mode development\\\",</span>\\n<span class=\\\"token deleted\\\">-    \\\"build\\\": \\\"webpack --mode production\\\"</span>\\n<span class=\\\"token inserted\\\">+    \\\"develop\\\": \\\"webpack --watch --config webpack.dev.js\\\",</span>\\n<span class=\\\"token inserted\\\">+    \\\"build\\\": \\\"webpack --config webpack.prod.js\\\"</span>\\n   },</code></pre>\\n      </div>\\n<h2>Tách CSS</h2>\\n<p>Chúng ta sẽ tách ra CSS khi chạy production bằng plugin là <code class=\\\"language-text\\\">ExtractTextWebpackPlugin</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save-dev extract-text-webpack-plugin</code></pre>\\n      </div>\\n<p>Setup loader cho file .scss giữ nguyên cho development mode, chỉ thêm ExtractTextWebpackPlugin cho production</p>\\n<p><strong>webpack.common.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"> ...\\n  module.exports = {\\n    ...\\n    module: {\\n      rules: [\\n        ...\\n<span class=\\\"token deleted\\\">-       {</span>\\n<span class=\\\"token deleted\\\">-         test: /\\\\.scss$/,</span>\\n<span class=\\\"token deleted\\\">-         use: [</span>\\n<span class=\\\"token deleted\\\">-           {</span>\\n<span class=\\\"token deleted\\\">-             loader: 'style-loader'</span>\\n<span class=\\\"token deleted\\\">-           }, {</span>\\n<span class=\\\"token deleted\\\">-             loader: 'css-loader'</span>\\n<span class=\\\"token deleted\\\">-           }, {</span>\\n<span class=\\\"token deleted\\\">-             loader: 'sass-loader'</span>\\n<span class=\\\"token deleted\\\">-           }</span>\\n<span class=\\\"token deleted\\\">-         ]</span>\\n<span class=\\\"token deleted\\\">-       },</span>\\n        ...\\n      ]\\n    }\\n  }</code></pre>\\n      </div>\\n<p><strong>webpack.dev.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">const merge = require('webpack-merge')\\n  const common = require('./webpack.common.js')\\n\\n  module.exports = merge(common, {\\n    mode: 'development',\\n<span class=\\\"token inserted\\\">+   module: {</span>\\n<span class=\\\"token inserted\\\">+     rules: [</span>\\n<span class=\\\"token inserted\\\">+       {</span>\\n<span class=\\\"token inserted\\\">+         test: /\\\\.scss$/,</span>\\n<span class=\\\"token inserted\\\">+         use: [</span>\\n<span class=\\\"token inserted\\\">+           {</span>\\n<span class=\\\"token inserted\\\">+             loader: 'style-loader'</span>\\n<span class=\\\"token inserted\\\">+           }, {</span>\\n<span class=\\\"token inserted\\\">+             loader: 'css-loader'</span>\\n<span class=\\\"token inserted\\\">+           }, {</span>\\n<span class=\\\"token inserted\\\">+             loader: 'sass-loader'</span>\\n<span class=\\\"token inserted\\\">+           }</span>\\n<span class=\\\"token inserted\\\">+         ]</span>\\n<span class=\\\"token inserted\\\">+       }</span>\\n<span class=\\\"token inserted\\\">+     ]</span>\\n<span class=\\\"token inserted\\\">+   }</span>\\n  })</code></pre>\\n      </div>\\n<p><strong>webpack.prod.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">  const merge = require('webpack-merge')\\n<span class=\\\"token inserted\\\">+ const ExtractTextPlugin = require('extract-text-webpack-plugin')</span>\\n  const common = require('./webpack.common.js')\\n\\n  module.exports = merge(common, {\\n    mode: 'production',\\n<span class=\\\"token inserted\\\">+   module: {</span>\\n<span class=\\\"token inserted\\\">+     rules: [</span>\\n<span class=\\\"token inserted\\\">+       {</span>\\n<span class=\\\"token inserted\\\">+         test: /\\\\.scss$/,</span>\\n<span class=\\\"token inserted\\\">+         use: ExtractTextPlugin.extract({</span>\\n<span class=\\\"token inserted\\\">+           fallback: 'style-loader',</span>\\n<span class=\\\"token inserted\\\">+           use: ['css-loader', 'sass-loader']</span>\\n<span class=\\\"token inserted\\\">+         })</span>\\n<span class=\\\"token inserted\\\">+       }</span>\\n<span class=\\\"token inserted\\\">+     ]</span>\\n<span class=\\\"token inserted\\\">+   },</span>\\n<span class=\\\"token inserted\\\">+   plugins: [</span>\\n<span class=\\\"token inserted\\\">+     new ExtractTextPlugin('style.css')</span>\\n<span class=\\\"token inserted\\\">+   ]</span>\\n  })</code></pre>\\n      </div>\\n<p>Nếu chạy <code class=\\\"language-text\\\">npm run build</code>, chúng ta có 3 file</p>\\n<ul>\\n<li>chat.bundle.js</li>\\n<li>app.bundle.js</li>\\n<li>style.css</li>\\n</ul>\\n<h2>Cập nhập HTML tự động</h2>\\n<p>Mỗi lần thay đổi chúng ta cứ phải tự tay chỉnh sửa file <code class=\\\"language-text\\\">index.html</code> thì hơi lười. Dùng <code class=\\\"language-text\\\">html-webpack-plugin</code> để tự động hóa quá trình này, đồng thời cần thêm <code class=\\\"language-text\\\">clean-webpack-plugin</code> để clear hết thư mục <code class=\\\"language-text\\\">dist</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> instal --save-dev html-webpack-plugin clean-webpack-plugin</code></pre>\\n      </div>\\n<p><strong>webpack.common.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">const path = require('path')\\n<span class=\\\"token inserted\\\">+ const CleanWebpackPlugin = require('clean-webpack-plugin');</span>\\n<span class=\\\"token inserted\\\">+ const HtmlWebpackPlugin = require('html-webpack-plugin');</span>\\n\\n  module.exports = {\\n    ...\\n<span class=\\\"token inserted\\\">+   plugins: [</span>\\n<span class=\\\"token inserted\\\">+     new CleanWebpackPlugin(['dist']),</span>\\n<span class=\\\"token inserted\\\">+     new HtmlWebpackPlugin({</span>\\n<span class=\\\"token inserted\\\">+       title: 'My killer app'</span>\\n<span class=\\\"token inserted\\\">+     })</span>\\n<span class=\\\"token inserted\\\">+   ]</span>\\n  }</code></pre>\\n      </div>\\n<p>Giờ mỗi lần build, chúng ta xóa hết thư mục dist luôn</p>\\n<h2>Development Server</h2>\\n<p>Với <code class=\\\"language-text\\\">webpack-dev-server</code> cung cấp cho chúng ta một web server đơn giản với tính năng live reload rất rất là hữu ích luôn mấy man</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save-dev webpack-dev-server</code></pre>\\n      </div>\\n<p><strong>package.json</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">  {\\n    ...\\n    \\\"scripts\\\": {\\n<span class=\\\"token deleted\\\">-     \\\"develop\\\": \\\"webpack --watch --config webpack.dev.js\\\",</span>\\n<span class=\\\"token inserted\\\">+     \\\"develop\\\": \\\"webpack-dev-server --config webpack.dev.js\\\",</span>\\n    }\\n    ...\\n  }</code></pre>\\n      </div>\\n<p>Giờ mà chạy <code class=\\\"language-text\\\">npm run develop</code> chúng ta sẽ có ngay server <a href=\\\"http://localhost:8080/\\\">http://localhost:8080/</a></p>\\n<h2>HotModuleReplacement</h2>\\n<p>Plugin <code class=\\\"language-text\\\">HotModuleReplacement</code> sẽ nhỉnh hơn Live Reload một chút, thay vì live reload trình duyệt sẽ tự động refresh, chúng ta sẽ thấy nó load lại toàn bộ trang khi có thay đổi, còn HotModuleReplacement là nó swap nguyên cái module trong lúc đang chạy mà không cần refresh luôn. Nhanh như cái chớp mắt vậy. Nếu mà cấu hình đúng, chúng ta tiết kiệm được khối thời gian ngồi đợi load lại trang.</p>\\n<p><strong>webpack.dev.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"><span class=\\\"token inserted\\\">+ const webpack = require('webpack')</span>\\n  const merge = require('webpack-merge')\\n  const common = require('./webpack.common.js')\\n\\n  module.exports = merge(common, {\\n    mode: 'development',\\n<span class=\\\"token inserted\\\">+   devServer: {</span>\\n<span class=\\\"token inserted\\\">+     hot: true</span>\\n<span class=\\\"token inserted\\\">+   },</span>\\n<span class=\\\"token inserted\\\">+   plugins: [</span>\\n<span class=\\\"token inserted\\\">+     new webpack.HotModuleReplacementPlugin()</span>\\n<span class=\\\"token inserted\\\">+   ],</span>\\n    ...\\n  }</code></pre>\\n      </div>\\n<p>Cho phép swap module trong app</p>\\n<p><strong>src/app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"><span class=\\\"token inserted\\\">+ if (module.hot) {</span>\\n<span class=\\\"token inserted\\\">+   module.hot.accept()</span>\\n<span class=\\\"token inserted\\\">+ }</span>\\n\\n  ...</code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">module.hot</code> sẽ có giá trị là <code class=\\\"language-text\\\">true</code> trong mode development và <code class=\\\"language-text\\\">false</code> trong production.</p>\\n<p><a href=\\\"https://www.sitepoint.com/beginners-guide-webpack-module-bundling/\\\">Link bài gốc</a>\\nTác giả: Mark Brown</p>\\n<p>Chỉnh sửa theo sự hiểu của mình một tí</p>\",\"frontmatter\":{\"date\":\"May 28, 2018\",\"path\":\"/2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3\",\"tags\":[\"javascript\",\"webpack\"],\"title\":\"Hướng dẫn webpack 4 cho người mới bắt đầu - Phần 3\",\"desc\":\"Bài này sẽ nói Plugins, Development, HotModuleReplacement trong Webpack\"}}},\"pathContext\":{\"prev\":{\"excerpt\":\"Gọi là bản hổ trợ chính thức vì trước bản React 16 thì không có support, chúng ta phải dùng các thư viện bổ sung. Giờ thì nó official rồi nhé. Vấn đề Portal giải quyết Thông thường khi chúng ta có component cha là A, bên trong đó render component con...\",\"html\":\"<p>Gọi là bản hổ trợ chính thức vì trước bản React 16 thì không có support, chúng ta phải dùng các thư viện bổ sung. Giờ thì nó official rồi nhé.</p>\\n<h2>Vấn đề Portal giải quyết</h2>\\n<p>Thông thường khi chúng ta có component cha là A, bên trong đó render component con là B, thì thằng B này sẽ luôn bị bọc lại bên trong A</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-c<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-a<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-b<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span></code></pre>\\n      </div>\\n<p>Giờ nếu ta muốn khi viết thì vẫn viết component B bên trong component A, nhưng kết quả html ta có được thì component B lại nằm trong component C. Đó là lúc chúng ta cần đến Portal, ta sẽ bọc component B bằng hàm <code class=\\\"language-text\\\">createPortal</code>, để khi <code class=\\\"language-text\\\">render</code> B thì nó lại <code class=\\\"language-text\\\">render</code> ở C.</p>\\n<h2>Cú pháp</h2>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token keyword\\\">import</span> ReactDOM <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'react-dom'</span><span class=\\\"token punctuation\\\">;</span>\\n\\nReactDOM<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createPortal</span><span class=\\\"token punctuation\\\">(</span>child<span class=\\\"token punctuation\\\">,</span> container<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Trong đó</p>\\n<ul>\\n<li><code class=\\\"language-text\\\">ReactDOM.createPortal</code> là hàm của <code class=\\\"language-text\\\">react-dom</code></li>\\n<li>child là thằng B, thằng con đi lông nhông không thèm ở nhà với cha nó</li>\\n<li>container là nhà thằng hàng xóm, nơi thằng con B hoang đàng sẽ ở ké.</li>\\n</ul>\\n<h2>Sử dụng</h2>\\n<p>Để sử dụng Portal, chúng ta tạo ra một component mới, độc lập với B, rồi đẩy thằng B hay bất kỳ đứa nào muốn có cuộc sống du mục thành child component của component mới tạo này, đặt tên là <code class=\\\"language-text\\\">MyPortal</code> nha.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token keyword\\\">import</span> React<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span> Component <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'react'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> PropTypes <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'prop-types'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> ReactDOM <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'react-dom'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">MyPortal</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// tìm coi có đứa nào chịu chứa chấp nó không</span>\\n    <span class=\\\"token keyword\\\">const</span> haveTarget <span class=\\\"token operator\\\">=</span> document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getElementById</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>target<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token comment\\\">// không nơi chứa chấp thì ta ko render luôn</span>\\n    <span class=\\\"token keyword\\\">return</span> haveTarget <span class=\\\"token operator\\\">?</span> ReactDOM<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createPortal</span><span class=\\\"token punctuation\\\">(</span>\\n      <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>children<span class=\\\"token punctuation\\\">,</span>\\n      haveTarget\\n    <span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">null</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\nMyPortal<span class=\\\"token punctuation\\\">.</span>propTypes <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// là id của html element ta sẽ append cái đứa con hoang đàng vô</span>\\n  target<span class=\\\"token punctuation\\\">:</span> PropTypes<span class=\\\"token punctuation\\\">.</span>string<span class=\\\"token punctuation\\\">.</span>isRequired<span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> MyPortal<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Component A sẽ viết như thế này</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">className</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-a<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        Hello An<span class=\\\"token punctuation\\\">.</span>Luu\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>MyPortal</span> <span class=\\\"token attr-name\\\">target</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">'</span>targetForB<span class=\\\"token punctuation\\\">'</span></span><span class=\\\"token punctuation\\\">></span></span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">className</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-b<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                Em là <span class=\\\"token constant\\\">B</span><span class=\\\"token operator\\\">!</span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>MyPortal</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token operator\\\">...</span>\\n\\n<span class=\\\"token comment\\\">// trong đó, id có thể nằm ở bất kỳ component nào đó khác, thậm chí window khác luôn mới ghê</span>\\n\\n<span class=\\\"token comment\\\">// ví dụ component C</span>\\n<span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">className</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-c<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        Em là <span class=\\\"token constant\\\">C</span><span class=\\\"token operator\\\">!</span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>targetForB<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token operator\\\">...</span></code></pre>\\n      </div>\\n<p>Đọc thêm </p>\\n<ul>\\n<li><a href=\\\"https://reactjs.org/docs/portals.html\\\">https://reactjs.org/docs/portals.html</a> </li>\\n<li><a href=\\\"https://hackernoon.com/using-a-react-16-portal-to-do-something-cool-2a2d627b0202\\\">https://hackernoon.com/using-a-react-16-portal-to-do-something-cool-2a2d627b0202</a></li>\\n</ul>\",\"id\":\"E:/anluu/luckyluu/posts/2018-05-31-gioi-thieu-react-portal/index.md absPath of file >>> MarkdownRemark\",\"timeToRead\":2,\"frontmatter\":{\"date\":\"2018-05-31T13:35:13.234Z\",\"path\":\"/2018-05-31-gioi-thieu-react-portal\",\"tags\":[\"javascript\",\"react\"],\"title\":\"Giới thiệu React Portal\"}},\"next\":{\"excerpt\":\"Trong Series này Webpack là gì và tại sao ta phải xài nó Dùng Loaders, code slitting trong webpack Plugins, Development Server Chúng ta mở lại file  package.json , sửa lại chút Với cách setup này, chỉ cần chạy   chúng ta sẽ chạy webpack ở development...\",\"html\":\"<h1>Trong Series này</h1>\\n<ol>\\n<li><a href=\\\"2018-05-25-viet-code-javascript-tot-hon-voi-webpack\\\">Webpack là gì và tại sao ta phải xài nó</a></li>\\n<li><a href=\\\"2018-05-27-huong-dan-webpack-4-cho-nguoi-moi-bat-dau\\\">Dùng Loaders, code slitting trong webpack</a></li>\\n<li><a href=\\\"2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3\\\">Plugins, Development Server</a></li>\\n</ol>\\n<p>Chúng ta mở lại file <strong>package.json</strong>, sửa lại chút</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">{\\n    ...\\n    \\\"scripts\\\": {\\n<span class=\\\"token inserted\\\">+     \\\"develop\\\": \\\"webpack --mode development --watch\\\",</span>\\n<span class=\\\"token inserted\\\">+     \\\"build\\\": \\\"webpack --mode production\\\"</span>\\n    },\\n    ...\\n}</code></pre>\\n      </div>\\n<p>Với cách setup này, chỉ cần chạy <code class=\\\"language-text\\\">npm run develop</code> chúng ta sẽ chạy webpack ở development mode và bật tính năng detect thay đổi để chạy lại.</p>\\n<p>Khi chạy <code class=\\\"language-text\\\">npm run build</code> chúng ta sẽ chạy webpack ở mode production, khi chạy ở mode này code sẽ được minified lại bằng Uglify JS, size nhỏ hơn khi chạy dev mode.</p>\\n<h2>Loaders</h2>\\n<p>Loaders là gì? loaders là những thư viện sẽ can thiệp trước lúc chúng ta import file, nó cho phép webpack mở rộng khả năng không chỉ còn là bundle javascript thôi, mà cả những static resource khác, như css, image, svg, ...</p>\\n<h3>Babel Loader</h3>\\n<p>Thời điểm hiện tại chắc ai cũng viết JS kiểu mới, để transpile cái ES6 mà ta viết, chúng ta sẽ cần <code class=\\\"language-text\\\">babel-loader</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save-dev babel-loader  @babel/core @babel/preset-env</code></pre>\\n      </div>\\n<p>Mở lại file <strong>webpack.config.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">const path = require('path')\\n\\n  module.exports = {\\n    entry: './src/index.js',\\n    output: {\\n      filename: 'bundle.js',\\n      path: path.resolve(__dirname, 'dist')\\n    },\\n<span class=\\\"token inserted\\\">+   module: {</span>\\n<span class=\\\"token inserted\\\">+     rules: [</span>\\n<span class=\\\"token inserted\\\">+       {</span>\\n<span class=\\\"token inserted\\\">+         test: /\\\\.js$/,</span>\\n<span class=\\\"token inserted\\\">+         exclude: /(node_modules|bower_components)/,</span>\\n<span class=\\\"token inserted\\\">+         use: {</span>\\n<span class=\\\"token inserted\\\">+           loader: 'babel-loader',</span>\\n<span class=\\\"token inserted\\\">+         }</span>\\n<span class=\\\"token inserted\\\">+       }</span>\\n<span class=\\\"token inserted\\\">+     ]</span>\\n<span class=\\\"token inserted\\\">+   }</span>\\n  }</code></pre>\\n      </div>\\n<p>Để cấu hình cách transpile của babel, chúng ta add thêm file <code class=\\\"language-text\\\">.babelrc</code> vào cùng thư mục với <strong>webpack.config.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code class=\\\"language-json\\\"><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">\\\"presets\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"@babel/env\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token property\\\">\\\"modules\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token property\\\">\\\"plugins\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"syntax-dynamic-import\\\"</span><span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Đoạn trên chúng ta đang cấu hình để khi Babel transpile, nó không đổi câu <code class=\\\"language-text\\\">import</code> và <code class=\\\"language-text\\\">export</code> về ES5 và cho phép import linh động, sau này dùng đến trong phần slitting code</p>\\n<p>Giờ thì cứ vô tư viết ES6 nhé, vì khi bundle, webpack sẽ transpile code của chúng về thành ES5</p>\\n<h2>SASS Loader</h2>\\n<p>Trước tiên cài một số package để làm việc với SASS</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save-dev style-loader css-loader sass-loader node-sass</code></pre>\\n      </div>\\n<p><strong>webpack.config.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"> module.exports = {\\n    ...\\n    module: {\\n      rules: [\\n        ...\\n<span class=\\\"token inserted\\\">+       {</span>\\n<span class=\\\"token inserted\\\">+         test: /\\\\.scss$/,</span>\\n<span class=\\\"token inserted\\\">+         use: [{</span>\\n<span class=\\\"token inserted\\\">+           loader: 'style-loader'</span>\\n<span class=\\\"token inserted\\\">+         }, {</span>\\n<span class=\\\"token inserted\\\">+           loader: 'css-loader'</span>\\n<span class=\\\"token inserted\\\">+         }, {</span>\\n<span class=\\\"token inserted\\\">+           loader: 'sass-loader'</span>\\n<span class=\\\"token inserted\\\">+         }]</span>\\n<span class=\\\"token inserted\\\">+       }</span>\\n      ]\\n    }\\n  }</code></pre>\\n      </div>\\n<p>Mấy cái loader này sẽ được thực hiện theo thứ tự</p>\\n<ul>\\n<li><code class=\\\"language-text\\\">sass-loader</code> transforms Sass thành CSS.</li>\\n<li><code class=\\\"language-text\\\">css-loader</code> parses CSS vào JavaScript và resolve dependencies.</li>\\n<li><code class=\\\"language-text\\\">style-loader</code> chèn CSS vào bên trong thẻ <code class=\\\"language-text\\\">&lt;style&gt;</code></li>\\n</ul>\\n<p>Có thể hình dung nó như một function với callback là một function khác</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token function\\\">styleLoader</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">cssLoader</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">sassLoader</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"source\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p>Sau khi cấu hình như vậy chúng ta có thể import file  <code class=\\\"language-text\\\">.scss</code> bên trong file javascript</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">import { groupBy } from 'lodash-es'\\nimport people from './people'\\n\\n<span class=\\\"token inserted\\\">+ import './style.scss'</span>\\n\\n  ...</code></pre>\\n      </div>\\n<p>Tại sao chúng ta lại đi import CSS vào trong file js? Nếu bạn thời kỳ trước việc chèn hầm bà lằng kiểu này là cực kỳ bị lên án, nhưng bây giờ thời thế khác, một số lý do để trọn CSS vào trong js trong development</p>\\n<ul>\\n<li>Một component javascript sẽ có thể phụ thuộc vào CSS, images, SVG. Nếu được đóng gói thành 1 cục, chúng ta dễ mang nó sử dụng ở nơi khác hơn</li>\\n<li>Nếu chúng ta không sử dụng component, đoạn css import trong component cũng sẽ không được import luôn, tránh những việc load css ở tất cả</li>\\n<li>Trước đây nếu dùng OOP trong CSS, việc chỉnh sửa một đoạn css sẽ dễ bị side effect, ảnh hướng đến những chổ ta không mong muốn. CSS module để CSS chỉ hoạt động local thôi</li>\\n<li>Giảm số lượng HTTP request xuống</li>\\n</ul>\\n<h3>Image</h3>\\n<p>Dùng <code class=\\\"language-text\\\">file-loader</code> để đọc file image. Với HTML chuẩn, image được sử dụng bằng 2 cách là dùng tag <code class=\\\"language-text\\\">img</code> hoặc thuộc tính <code class=\\\"language-text\\\">background-image</code>. Với Webpack, chúng ta có thể optimize cho trường hợp dung lượng image với kích thước nhỏ thành dạng <code class=\\\"language-text\\\">string</code> bên trong javascript luôn. Lúc này trình duyệt không cần load riêng file image nữa</p>\\n<p>Cài cái loader</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">nmp <span class=\\\"token function\\\">install</span> --save-dev file-loader</code></pre>\\n      </div>\\n<p>webpack.config.js</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"> module.exports = {\\n    ...\\n    module: {\\n      rules: [\\n        ...\\n<span class=\\\"token inserted\\\">+       {</span>\\n<span class=\\\"token inserted\\\">+         test: /\\\\.(png|svg|jpg|gif)$/,</span>\\n<span class=\\\"token inserted\\\">+         use: [</span>\\n<span class=\\\"token inserted\\\">+           {</span>\\n<span class=\\\"token inserted\\\">+             loader: 'file-loader'</span>\\n<span class=\\\"token inserted\\\">+           }</span>\\n<span class=\\\"token inserted\\\">+         ]</span>\\n<span class=\\\"token inserted\\\">+       }</span>\\n      ]\\n    }\\n  }</code></pre>\\n      </div>\\n<p>Trong lúc code chúng ta vẫn viết bình thường</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token keyword\\\">import</span> codeURL <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./code.png'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span><span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>img</span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>codeURL<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token attr-name\\\">alt</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n  <span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token operator\\\">...</span></code></pre>\\n      </div>\\n<p>Kết quả bundle</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>img</span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>data:image/png;base64,iVBO...<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span></code></pre>\\n      </div>\\n<p>Có thể đọc thêm trên docs của <code class=\\\"language-text\\\">file-loader</code> để xem cách chỉnh kích thước nào thì chuyển nội dung ảnh thành data URI. File loader còn thể thể xử lý trên một số dạng file khác nữa, chứ không chỉ là hình thôi không.</p>\\n<h2>Code splitting</h2>\\n<p>Trích từ trang chủ webpack</p>\\n<blockquote>\\n<p>Code splitting là một trong những tính năng hấp dẫn nhất của Webpack. Tính năng này cho phép bạn tách code ra thành nhiều file bundle để load khi cần thiết hoặc load xong xong. Cái này có thể dùng để giảm kích thước file bundle và kiểm soát được load resource hợp lý hơn, nếu sử dụng đúng cách, sẽ giảm đảng kể thời gian load trang</p>\\n</blockquote>\\n<p>Trước giờ chúng ta chỉ setup để bundle ra 1 file duy nhất từ <code class=\\\"language-text\\\">src/index.js</code> ra file <code class=\\\"language-text\\\">dist/bundle.js</code>. Khi ứng dúng phình ra, chúng ta cần tách code ra thành nhiều file, toàn bộ code đầu cần phải load hết ngay từ đầu đâu nhỉ? Dùng <a href=\\\"https://webpack.js.org/guides/code-splitting/\\\">Code Slitting</a> và <a href=\\\"https://webpack.js.org/guides/lazy-loading/\\\">Lazy Loading</a> để chỉ load khi cần.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">   const path = require('path')\\n\\n  module.exports = {\\n<span class=\\\"token deleted\\\">-   entry: './src/index.js',</span>\\n<span class=\\\"token inserted\\\">+   entry: {</span>\\n<span class=\\\"token inserted\\\">+     app: './src/app.js'</span>\\n<span class=\\\"token inserted\\\">+   },</span>\\n    output: {\\n<span class=\\\"token deleted\\\">-     filename: 'bundle.js',</span>\\n<span class=\\\"token inserted\\\">+     filename: '[name].bundle.js',</span>\\n      path: path.resolve(__dirname, 'dist')\\n    },\\n    ...\\n  }</code></pre>\\n      </div>\\n<p>Với setup như thế này, nếu chúng ta có 2 file trong thư mục <code class=\\\"language-text\\\">src</code> là <code class=\\\"language-text\\\">app.js</code> và <code class=\\\"language-text\\\">chat.js</code>, webpack sẽ bundle ra 2 file <code class=\\\"language-text\\\">chat.bundle.js</code>, <code class=\\\"language-text\\\">app.bundle.js</code></p>\\n<p>Bài sau nói tiếp plugins nhé, kết thúc với loaders ở đây</p>\\n<p><a href=\\\"https://www.sitepoint.com/beginners-guide-webpack-module-bundling/\\\">Link bài gốc</a>\\nTác giả: Mark Brown</p>\\n<p>Chỉnh sửa theo sự hiểu của mình một tí</p>\",\"id\":\"E:/anluu/luckyluu/posts/2018-05-27-huong-dan-webpack-4-cho-nguoi-moi-bat-dau/index.md absPath of file >>> MarkdownRemark\",\"timeToRead\":5,\"frontmatter\":{\"date\":\"2018-05-27T13:35:13.234Z\",\"path\":\"/2018-05-27-huong-dan-webpack-4-cho-nguoi-moi-bat-dau\",\"tags\":[\"javascript\",\"webpack\"],\"title\":\"Hướng dẫn webpack 4 cho người mới bắt đầu - Phần 2\"}}}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3-61aad2c28d7892c0a710.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<h1>Trong Series này</h1>\\n<ol>\\n<li><a href=\\\"2018-05-25-viet-code-javascript-tot-hon-voi-webpack\\\">Webpack là gì và tại sao ta phải xài nó</a></li>\\n<li><a href=\\\"2018-05-27-huong-dan-webpack-4-cho-nguoi-moi-bat-dau\\\">Dùng Loaders, code slitting trong webpack</a></li>\\n<li><a href=\\\"2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3\\\">Plugins, Development Server</a></li>\\n</ol>\\n<p>Trong khi loader sẽ tiến hành transform từng file một, <strong>plugins</strong> sẽ tiến hành xử lý trong từng đoạn code</p>\\n<p>Giờ chúng ta đã biết cách  bundle code, cài thêm các module bổ sung cho webpack, cách thêm các static asset, file bundle chúng ta sẽ bự dần bự dần - không sớm thì muộn thôi. Plugins sẽ giúp chúng ta tách phần code một cách thông mình hơn, optimize hơn cho production</p>\\n<p>Thật ra ma nói, khi sử dụng <code class=\\\"language-text\\\">mode</code> development/production trong webpack chúng ta đã sử dụng rất nhiều plugin mặc định trong webpack</p>\\n<p><em>develoment</em></p>\\n<ul>\\n<li>lúc này giá trị biến <code class=\\\"language-text\\\">process.env.NODE_ENV</code> sẽ bằng 'development'</li>\\n<li>dùng NamedModulesPlugin</li>\\n</ul>\\n<p><em>production</em></p>\\n<ul>\\n<li><code class=\\\"language-text\\\">process.env.NODE_ENV</code> sẽ bằng 'production'</li>\\n<li>UglifyJsPlugin</li>\\n<li>ModuleConcatenationPlugin</li>\\n<li>NoEmitOnErrorsPlugin</li>\\n</ul>\\n<p>Trước khi thêm một số plugin khác, chúng ta sẽ tách file config ra thành 2, để sau này chúng ta apply các plugin khác nhau cho các mode chạy khác nhau</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"><span class=\\\"token deleted\\\">- webpack.config.js</span>\\n<span class=\\\"token inserted\\\">+ webpack.common.js</span>\\n<span class=\\\"token inserted\\\">+ webpack.dev.js</span>\\n<span class=\\\"token inserted\\\">+ webpack.prod.js</span></code></pre>\\n      </div>\\n<p>Cài thêm plugin là <code class=\\\"language-text\\\">webpack-merge</code> để trộn file <em>webpack.common.js</em> với một trong 2 file webpack.dev.js hoặc webpack.prod.js</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save-dev webpack-merge</code></pre>\\n      </div>\\n<p><strong>webpack.dev.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">const</span> merge <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'webpack-merge'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> common <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./webpack.common.js'</span><span class=\\\"token punctuation\\\">)</span>\\n\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">merge</span><span class=\\\"token punctuation\\\">(</span>common<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n  mode<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'development'</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p><strong>webpack.prod.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token keyword\\\">const</span> merge <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'webpack-merge'</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token keyword\\\">const</span> common <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./webpack.common.js'</span><span class=\\\"token punctuation\\\">)</span>\\n\\nmodule<span class=\\\"token punctuation\\\">.</span>exports <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">merge</span><span class=\\\"token punctuation\\\">(</span>common<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n  mode<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">'production'</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p><strong>package.json</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">  \\\"scripts\\\": {\\n<span class=\\\"token deleted\\\">-    \\\"develop\\\": \\\"webpack --watch --mode development\\\",</span>\\n<span class=\\\"token deleted\\\">-    \\\"build\\\": \\\"webpack --mode production\\\"</span>\\n<span class=\\\"token inserted\\\">+    \\\"develop\\\": \\\"webpack --watch --config webpack.dev.js\\\",</span>\\n<span class=\\\"token inserted\\\">+    \\\"build\\\": \\\"webpack --config webpack.prod.js\\\"</span>\\n   },</code></pre>\\n      </div>\\n<h2>Tách CSS</h2>\\n<p>Chúng ta sẽ tách ra CSS khi chạy production bằng plugin là <code class=\\\"language-text\\\">ExtractTextWebpackPlugin</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save-dev extract-text-webpack-plugin</code></pre>\\n      </div>\\n<p>Setup loader cho file .scss giữ nguyên cho development mode, chỉ thêm ExtractTextWebpackPlugin cho production</p>\\n<p><strong>webpack.common.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"> ...\\n  module.exports = {\\n    ...\\n    module: {\\n      rules: [\\n        ...\\n<span class=\\\"token deleted\\\">-       {</span>\\n<span class=\\\"token deleted\\\">-         test: /\\\\.scss$/,</span>\\n<span class=\\\"token deleted\\\">-         use: [</span>\\n<span class=\\\"token deleted\\\">-           {</span>\\n<span class=\\\"token deleted\\\">-             loader: 'style-loader'</span>\\n<span class=\\\"token deleted\\\">-           }, {</span>\\n<span class=\\\"token deleted\\\">-             loader: 'css-loader'</span>\\n<span class=\\\"token deleted\\\">-           }, {</span>\\n<span class=\\\"token deleted\\\">-             loader: 'sass-loader'</span>\\n<span class=\\\"token deleted\\\">-           }</span>\\n<span class=\\\"token deleted\\\">-         ]</span>\\n<span class=\\\"token deleted\\\">-       },</span>\\n        ...\\n      ]\\n    }\\n  }</code></pre>\\n      </div>\\n<p><strong>webpack.dev.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">const merge = require('webpack-merge')\\n  const common = require('./webpack.common.js')\\n\\n  module.exports = merge(common, {\\n    mode: 'development',\\n<span class=\\\"token inserted\\\">+   module: {</span>\\n<span class=\\\"token inserted\\\">+     rules: [</span>\\n<span class=\\\"token inserted\\\">+       {</span>\\n<span class=\\\"token inserted\\\">+         test: /\\\\.scss$/,</span>\\n<span class=\\\"token inserted\\\">+         use: [</span>\\n<span class=\\\"token inserted\\\">+           {</span>\\n<span class=\\\"token inserted\\\">+             loader: 'style-loader'</span>\\n<span class=\\\"token inserted\\\">+           }, {</span>\\n<span class=\\\"token inserted\\\">+             loader: 'css-loader'</span>\\n<span class=\\\"token inserted\\\">+           }, {</span>\\n<span class=\\\"token inserted\\\">+             loader: 'sass-loader'</span>\\n<span class=\\\"token inserted\\\">+           }</span>\\n<span class=\\\"token inserted\\\">+         ]</span>\\n<span class=\\\"token inserted\\\">+       }</span>\\n<span class=\\\"token inserted\\\">+     ]</span>\\n<span class=\\\"token inserted\\\">+   }</span>\\n  })</code></pre>\\n      </div>\\n<p><strong>webpack.prod.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">  const merge = require('webpack-merge')\\n<span class=\\\"token inserted\\\">+ const ExtractTextPlugin = require('extract-text-webpack-plugin')</span>\\n  const common = require('./webpack.common.js')\\n\\n  module.exports = merge(common, {\\n    mode: 'production',\\n<span class=\\\"token inserted\\\">+   module: {</span>\\n<span class=\\\"token inserted\\\">+     rules: [</span>\\n<span class=\\\"token inserted\\\">+       {</span>\\n<span class=\\\"token inserted\\\">+         test: /\\\\.scss$/,</span>\\n<span class=\\\"token inserted\\\">+         use: ExtractTextPlugin.extract({</span>\\n<span class=\\\"token inserted\\\">+           fallback: 'style-loader',</span>\\n<span class=\\\"token inserted\\\">+           use: ['css-loader', 'sass-loader']</span>\\n<span class=\\\"token inserted\\\">+         })</span>\\n<span class=\\\"token inserted\\\">+       }</span>\\n<span class=\\\"token inserted\\\">+     ]</span>\\n<span class=\\\"token inserted\\\">+   },</span>\\n<span class=\\\"token inserted\\\">+   plugins: [</span>\\n<span class=\\\"token inserted\\\">+     new ExtractTextPlugin('style.css')</span>\\n<span class=\\\"token inserted\\\">+   ]</span>\\n  })</code></pre>\\n      </div>\\n<p>Nếu chạy <code class=\\\"language-text\\\">npm run build</code>, chúng ta có 3 file</p>\\n<ul>\\n<li>chat.bundle.js</li>\\n<li>app.bundle.js</li>\\n<li>style.css</li>\\n</ul>\\n<h2>Cập nhập HTML tự động</h2>\\n<p>Mỗi lần thay đổi chúng ta cứ phải tự tay chỉnh sửa file <code class=\\\"language-text\\\">index.html</code> thì hơi lười. Dùng <code class=\\\"language-text\\\">html-webpack-plugin</code> để tự động hóa quá trình này, đồng thời cần thêm <code class=\\\"language-text\\\">clean-webpack-plugin</code> để clear hết thư mục <code class=\\\"language-text\\\">dist</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> instal --save-dev html-webpack-plugin clean-webpack-plugin</code></pre>\\n      </div>\\n<p><strong>webpack.common.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">const path = require('path')\\n<span class=\\\"token inserted\\\">+ const CleanWebpackPlugin = require('clean-webpack-plugin');</span>\\n<span class=\\\"token inserted\\\">+ const HtmlWebpackPlugin = require('html-webpack-plugin');</span>\\n\\n  module.exports = {\\n    ...\\n<span class=\\\"token inserted\\\">+   plugins: [</span>\\n<span class=\\\"token inserted\\\">+     new CleanWebpackPlugin(['dist']),</span>\\n<span class=\\\"token inserted\\\">+     new HtmlWebpackPlugin({</span>\\n<span class=\\\"token inserted\\\">+       title: 'My killer app'</span>\\n<span class=\\\"token inserted\\\">+     })</span>\\n<span class=\\\"token inserted\\\">+   ]</span>\\n  }</code></pre>\\n      </div>\\n<p>Giờ mỗi lần build, chúng ta xóa hết thư mục dist luôn</p>\\n<h2>Development Server</h2>\\n<p>Với <code class=\\\"language-text\\\">webpack-dev-server</code> cung cấp cho chúng ta một web server đơn giản với tính năng live reload rất rất là hữu ích luôn mấy man</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save-dev webpack-dev-server</code></pre>\\n      </div>\\n<p><strong>package.json</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">  {\\n    ...\\n    \\\"scripts\\\": {\\n<span class=\\\"token deleted\\\">-     \\\"develop\\\": \\\"webpack --watch --config webpack.dev.js\\\",</span>\\n<span class=\\\"token inserted\\\">+     \\\"develop\\\": \\\"webpack-dev-server --config webpack.dev.js\\\",</span>\\n    }\\n    ...\\n  }</code></pre>\\n      </div>\\n<p>Giờ mà chạy <code class=\\\"language-text\\\">npm run develop</code> chúng ta sẽ có ngay server <a href=\\\"http://localhost:8080/\\\">http://localhost:8080/</a></p>\\n<h2>HotModuleReplacement</h2>\\n<p>Plugin <code class=\\\"language-text\\\">HotModuleReplacement</code> sẽ nhỉnh hơn Live Reload một chút, thay vì live reload trình duyệt sẽ tự động refresh, chúng ta sẽ thấy nó load lại toàn bộ trang khi có thay đổi, còn HotModuleReplacement là nó swap nguyên cái module trong lúc đang chạy mà không cần refresh luôn. Nhanh như cái chớp mắt vậy. Nếu mà cấu hình đúng, chúng ta tiết kiệm được khối thời gian ngồi đợi load lại trang.</p>\\n<p><strong>webpack.dev.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"><span class=\\\"token inserted\\\">+ const webpack = require('webpack')</span>\\n  const merge = require('webpack-merge')\\n  const common = require('./webpack.common.js')\\n\\n  module.exports = merge(common, {\\n    mode: 'development',\\n<span class=\\\"token inserted\\\">+   devServer: {</span>\\n<span class=\\\"token inserted\\\">+     hot: true</span>\\n<span class=\\\"token inserted\\\">+   },</span>\\n<span class=\\\"token inserted\\\">+   plugins: [</span>\\n<span class=\\\"token inserted\\\">+     new webpack.HotModuleReplacementPlugin()</span>\\n<span class=\\\"token inserted\\\">+   ],</span>\\n    ...\\n  }</code></pre>\\n      </div>\\n<p>Cho phép swap module trong app</p>\\n<p><strong>src/app.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"><span class=\\\"token inserted\\\">+ if (module.hot) {</span>\\n<span class=\\\"token inserted\\\">+   module.hot.accept()</span>\\n<span class=\\\"token inserted\\\">+ }</span>\\n\\n  ...</code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">module.hot</code> sẽ có giá trị là <code class=\\\"language-text\\\">true</code> trong mode development và <code class=\\\"language-text\\\">false</code> trong production.</p>\\n<p><a href=\\\"https://www.sitepoint.com/beginners-guide-webpack-module-bundling/\\\">Link bài gốc</a>\\nTác giả: Mark Brown</p>\\n<p>Chỉnh sửa theo sự hiểu của mình một tí</p>\",\"frontmatter\":{\"date\":\"May 28, 2018\",\"path\":\"/2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3\",\"tags\":[\"javascript\",\"webpack\"],\"title\":\"Hướng dẫn webpack 4 cho người mới bắt đầu - Phần 3\",\"desc\":\"Bài này sẽ nói Plugins, Development, HotModuleReplacement trong Webpack\"}}},\"pathContext\":{\"prev\":{\"excerpt\":\"Gọi là bản hổ trợ chính thức vì trước bản React 16 thì không có support, chúng ta phải dùng các thư viện bổ sung. Giờ thì nó official rồi nhé. Vấn đề Portal giải quyết Thông thường khi chúng ta có component cha là A, bên trong đó render component con...\",\"html\":\"<p>Gọi là bản hổ trợ chính thức vì trước bản React 16 thì không có support, chúng ta phải dùng các thư viện bổ sung. Giờ thì nó official rồi nhé.</p>\\n<h2>Vấn đề Portal giải quyết</h2>\\n<p>Thông thường khi chúng ta có component cha là A, bên trong đó render component con là B, thì thằng B này sẽ luôn bị bọc lại bên trong A</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-c<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-a<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">class</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-b<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span></code></pre>\\n      </div>\\n<p>Giờ nếu ta muốn khi viết thì vẫn viết component B bên trong component A, nhưng kết quả html ta có được thì component B lại nằm trong component C. Đó là lúc chúng ta cần đến Portal, ta sẽ bọc component B bằng hàm <code class=\\\"language-text\\\">createPortal</code>, để khi <code class=\\\"language-text\\\">render</code> B thì nó lại <code class=\\\"language-text\\\">render</code> ở C.</p>\\n<h2>Cú pháp</h2>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token keyword\\\">import</span> ReactDOM <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'react-dom'</span><span class=\\\"token punctuation\\\">;</span>\\n\\nReactDOM<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createPortal</span><span class=\\\"token punctuation\\\">(</span>child<span class=\\\"token punctuation\\\">,</span> container<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Trong đó</p>\\n<ul>\\n<li><code class=\\\"language-text\\\">ReactDOM.createPortal</code> là hàm của <code class=\\\"language-text\\\">react-dom</code></li>\\n<li>child là thằng B, thằng con đi lông nhông không thèm ở nhà với cha nó</li>\\n<li>container là nhà thằng hàng xóm, nơi thằng con B hoang đàng sẽ ở ké.</li>\\n</ul>\\n<h2>Sử dụng</h2>\\n<p>Để sử dụng Portal, chúng ta tạo ra một component mới, độc lập với B, rồi đẩy thằng B hay bất kỳ đứa nào muốn có cuộc sống du mục thành child component của component mới tạo này, đặt tên là <code class=\\\"language-text\\\">MyPortal</code> nha.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token keyword\\\">import</span> React<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span> Component <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'react'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> PropTypes <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'prop-types'</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> ReactDOM <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'react-dom'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">class</span> <span class=\\\"token class-name\\\">MyPortal</span> <span class=\\\"token keyword\\\">extends</span> <span class=\\\"token class-name\\\">Component</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">// tìm coi có đứa nào chịu chứa chấp nó không</span>\\n    <span class=\\\"token keyword\\\">const</span> haveTarget <span class=\\\"token operator\\\">=</span> document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getElementById</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>target<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token comment\\\">// không nơi chứa chấp thì ta ko render luôn</span>\\n    <span class=\\\"token keyword\\\">return</span> haveTarget <span class=\\\"token operator\\\">?</span> ReactDOM<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createPortal</span><span class=\\\"token punctuation\\\">(</span>\\n      <span class=\\\"token keyword\\\">this</span><span class=\\\"token punctuation\\\">.</span>props<span class=\\\"token punctuation\\\">.</span>children<span class=\\\"token punctuation\\\">,</span>\\n      haveTarget\\n    <span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">null</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\nMyPortal<span class=\\\"token punctuation\\\">.</span>propTypes <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// là id của html element ta sẽ append cái đứa con hoang đàng vô</span>\\n  target<span class=\\\"token punctuation\\\">:</span> PropTypes<span class=\\\"token punctuation\\\">.</span>string<span class=\\\"token punctuation\\\">.</span>isRequired<span class=\\\"token punctuation\\\">,</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> MyPortal<span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Component A sẽ viết như thế này</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">className</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-a<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        Hello An<span class=\\\"token punctuation\\\">.</span>Luu\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>MyPortal</span> <span class=\\\"token attr-name\\\">target</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">'</span>targetForB<span class=\\\"token punctuation\\\">'</span></span><span class=\\\"token punctuation\\\">></span></span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">className</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-b<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n                Em là <span class=\\\"token constant\\\">B</span><span class=\\\"token operator\\\">!</span>\\n            <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>MyPortal</span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token operator\\\">...</span>\\n\\n<span class=\\\"token comment\\\">// trong đó, id có thể nằm ở bất kỳ component nào đó khác, thậm chí window khác luôn mới ghê</span>\\n\\n<span class=\\\"token comment\\\">// ví dụ component C</span>\\n<span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">className</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>component-c<span class=\\\"token punctuation\\\">\\\"</span></span><span class=\\\"token punctuation\\\">></span></span>\\n        Em là <span class=\\\"token constant\\\">C</span><span class=\\\"token operator\\\">!</span>\\n        <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span> <span class=\\\"token attr-name\\\">id</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>targetForB<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>div</span><span class=\\\"token punctuation\\\">></span></span>\\n<span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token operator\\\">...</span></code></pre>\\n      </div>\\n<p>Đọc thêm </p>\\n<ul>\\n<li><a href=\\\"https://reactjs.org/docs/portals.html\\\">https://reactjs.org/docs/portals.html</a> </li>\\n<li><a href=\\\"https://hackernoon.com/using-a-react-16-portal-to-do-something-cool-2a2d627b0202\\\">https://hackernoon.com/using-a-react-16-portal-to-do-something-cool-2a2d627b0202</a></li>\\n</ul>\",\"id\":\"E:/anluu/luckyluu/posts/2018-05-31-gioi-thieu-react-portal/index.md absPath of file >>> MarkdownRemark\",\"timeToRead\":2,\"frontmatter\":{\"date\":\"2018-05-31T13:35:13.234Z\",\"path\":\"/2018-05-31-gioi-thieu-react-portal\",\"tags\":[\"javascript\",\"react\"],\"title\":\"Giới thiệu React Portal\"}},\"next\":{\"excerpt\":\"Trong Series này Webpack là gì và tại sao ta phải xài nó Dùng Loaders, code slitting trong webpack Plugins, Development Server Chúng ta mở lại file  package.json , sửa lại chút Với cách setup này, chỉ cần chạy   chúng ta sẽ chạy webpack ở development...\",\"html\":\"<h1>Trong Series này</h1>\\n<ol>\\n<li><a href=\\\"2018-05-25-viet-code-javascript-tot-hon-voi-webpack\\\">Webpack là gì và tại sao ta phải xài nó</a></li>\\n<li><a href=\\\"2018-05-27-huong-dan-webpack-4-cho-nguoi-moi-bat-dau\\\">Dùng Loaders, code slitting trong webpack</a></li>\\n<li><a href=\\\"2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3\\\">Plugins, Development Server</a></li>\\n</ol>\\n<p>Chúng ta mở lại file <strong>package.json</strong>, sửa lại chút</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">{\\n    ...\\n    \\\"scripts\\\": {\\n<span class=\\\"token inserted\\\">+     \\\"develop\\\": \\\"webpack --mode development --watch\\\",</span>\\n<span class=\\\"token inserted\\\">+     \\\"build\\\": \\\"webpack --mode production\\\"</span>\\n    },\\n    ...\\n}</code></pre>\\n      </div>\\n<p>Với cách setup này, chỉ cần chạy <code class=\\\"language-text\\\">npm run develop</code> chúng ta sẽ chạy webpack ở development mode và bật tính năng detect thay đổi để chạy lại.</p>\\n<p>Khi chạy <code class=\\\"language-text\\\">npm run build</code> chúng ta sẽ chạy webpack ở mode production, khi chạy ở mode này code sẽ được minified lại bằng Uglify JS, size nhỏ hơn khi chạy dev mode.</p>\\n<h2>Loaders</h2>\\n<p>Loaders là gì? loaders là những thư viện sẽ can thiệp trước lúc chúng ta import file, nó cho phép webpack mở rộng khả năng không chỉ còn là bundle javascript thôi, mà cả những static resource khác, như css, image, svg, ...</p>\\n<h3>Babel Loader</h3>\\n<p>Thời điểm hiện tại chắc ai cũng viết JS kiểu mới, để transpile cái ES6 mà ta viết, chúng ta sẽ cần <code class=\\\"language-text\\\">babel-loader</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save-dev babel-loader  @babel/core @babel/preset-env</code></pre>\\n      </div>\\n<p>Mở lại file <strong>webpack.config.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">const path = require('path')\\n\\n  module.exports = {\\n    entry: './src/index.js',\\n    output: {\\n      filename: 'bundle.js',\\n      path: path.resolve(__dirname, 'dist')\\n    },\\n<span class=\\\"token inserted\\\">+   module: {</span>\\n<span class=\\\"token inserted\\\">+     rules: [</span>\\n<span class=\\\"token inserted\\\">+       {</span>\\n<span class=\\\"token inserted\\\">+         test: /\\\\.js$/,</span>\\n<span class=\\\"token inserted\\\">+         exclude: /(node_modules|bower_components)/,</span>\\n<span class=\\\"token inserted\\\">+         use: {</span>\\n<span class=\\\"token inserted\\\">+           loader: 'babel-loader',</span>\\n<span class=\\\"token inserted\\\">+         }</span>\\n<span class=\\\"token inserted\\\">+       }</span>\\n<span class=\\\"token inserted\\\">+     ]</span>\\n<span class=\\\"token inserted\\\">+   }</span>\\n  }</code></pre>\\n      </div>\\n<p>Để cấu hình cách transpile của babel, chúng ta add thêm file <code class=\\\"language-text\\\">.babelrc</code> vào cùng thư mục với <strong>webpack.config.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code class=\\\"language-json\\\"><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">\\\"presets\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span>\\n    <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"@babel/env\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token property\\\">\\\"modules\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token boolean\\\">false</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n  <span class=\\\"token property\\\">\\\"plugins\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"syntax-dynamic-import\\\"</span><span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Đoạn trên chúng ta đang cấu hình để khi Babel transpile, nó không đổi câu <code class=\\\"language-text\\\">import</code> và <code class=\\\"language-text\\\">export</code> về ES5 và cho phép import linh động, sau này dùng đến trong phần slitting code</p>\\n<p>Giờ thì cứ vô tư viết ES6 nhé, vì khi bundle, webpack sẽ transpile code của chúng về thành ES5</p>\\n<h2>SASS Loader</h2>\\n<p>Trước tiên cài một số package để làm việc với SASS</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\"><span class=\\\"token function\\\">npm</span> <span class=\\\"token function\\\">install</span> --save-dev style-loader css-loader sass-loader node-sass</code></pre>\\n      </div>\\n<p><strong>webpack.config.js</strong></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"> module.exports = {\\n    ...\\n    module: {\\n      rules: [\\n        ...\\n<span class=\\\"token inserted\\\">+       {</span>\\n<span class=\\\"token inserted\\\">+         test: /\\\\.scss$/,</span>\\n<span class=\\\"token inserted\\\">+         use: [{</span>\\n<span class=\\\"token inserted\\\">+           loader: 'style-loader'</span>\\n<span class=\\\"token inserted\\\">+         }, {</span>\\n<span class=\\\"token inserted\\\">+           loader: 'css-loader'</span>\\n<span class=\\\"token inserted\\\">+         }, {</span>\\n<span class=\\\"token inserted\\\">+           loader: 'sass-loader'</span>\\n<span class=\\\"token inserted\\\">+         }]</span>\\n<span class=\\\"token inserted\\\">+       }</span>\\n      ]\\n    }\\n  }</code></pre>\\n      </div>\\n<p>Mấy cái loader này sẽ được thực hiện theo thứ tự</p>\\n<ul>\\n<li><code class=\\\"language-text\\\">sass-loader</code> transforms Sass thành CSS.</li>\\n<li><code class=\\\"language-text\\\">css-loader</code> parses CSS vào JavaScript và resolve dependencies.</li>\\n<li><code class=\\\"language-text\\\">style-loader</code> chèn CSS vào bên trong thẻ <code class=\\\"language-text\\\">&lt;style&gt;</code></li>\\n</ul>\\n<p>Có thể hình dung nó như một function với callback là một function khác</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token function\\\">styleLoader</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">cssLoader</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">sassLoader</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"source\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p>Sau khi cấu hình như vậy chúng ta có thể import file  <code class=\\\"language-text\\\">.scss</code> bên trong file javascript</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">import { groupBy } from 'lodash-es'\\nimport people from './people'\\n\\n<span class=\\\"token inserted\\\">+ import './style.scss'</span>\\n\\n  ...</code></pre>\\n      </div>\\n<p>Tại sao chúng ta lại đi import CSS vào trong file js? Nếu bạn thời kỳ trước việc chèn hầm bà lằng kiểu này là cực kỳ bị lên án, nhưng bây giờ thời thế khác, một số lý do để trọn CSS vào trong js trong development</p>\\n<ul>\\n<li>Một component javascript sẽ có thể phụ thuộc vào CSS, images, SVG. Nếu được đóng gói thành 1 cục, chúng ta dễ mang nó sử dụng ở nơi khác hơn</li>\\n<li>Nếu chúng ta không sử dụng component, đoạn css import trong component cũng sẽ không được import luôn, tránh những việc load css ở tất cả</li>\\n<li>Trước đây nếu dùng OOP trong CSS, việc chỉnh sửa một đoạn css sẽ dễ bị side effect, ảnh hướng đến những chổ ta không mong muốn. CSS module để CSS chỉ hoạt động local thôi</li>\\n<li>Giảm số lượng HTTP request xuống</li>\\n</ul>\\n<h3>Image</h3>\\n<p>Dùng <code class=\\\"language-text\\\">file-loader</code> để đọc file image. Với HTML chuẩn, image được sử dụng bằng 2 cách là dùng tag <code class=\\\"language-text\\\">img</code> hoặc thuộc tính <code class=\\\"language-text\\\">background-image</code>. Với Webpack, chúng ta có thể optimize cho trường hợp dung lượng image với kích thước nhỏ thành dạng <code class=\\\"language-text\\\">string</code> bên trong javascript luôn. Lúc này trình duyệt không cần load riêng file image nữa</p>\\n<p>Cài cái loader</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-bash\\\"><code class=\\\"language-bash\\\">nmp <span class=\\\"token function\\\">install</span> --save-dev file-loader</code></pre>\\n      </div>\\n<p>webpack.config.js</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\"> module.exports = {\\n    ...\\n    module: {\\n      rules: [\\n        ...\\n<span class=\\\"token inserted\\\">+       {</span>\\n<span class=\\\"token inserted\\\">+         test: /\\\\.(png|svg|jpg|gif)$/,</span>\\n<span class=\\\"token inserted\\\">+         use: [</span>\\n<span class=\\\"token inserted\\\">+           {</span>\\n<span class=\\\"token inserted\\\">+             loader: 'file-loader'</span>\\n<span class=\\\"token inserted\\\">+           }</span>\\n<span class=\\\"token inserted\\\">+         ]</span>\\n<span class=\\\"token inserted\\\">+       }</span>\\n      ]\\n    }\\n  }</code></pre>\\n      </div>\\n<p>Trong lúc code chúng ta vẫn viết bình thường</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token keyword\\\">import</span> codeURL <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./code.png'</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token operator\\\">...</span>\\n<span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">return</span><span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>img</span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>codeURL<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token attr-name\\\">alt</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span><span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n  <span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token operator\\\">...</span></code></pre>\\n      </div>\\n<p>Kết quả bundle</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-html\\\"><code class=\\\"language-html\\\"><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span>img</span> <span class=\\\"token attr-name\\\">src</span><span class=\\\"token attr-value\\\"><span class=\\\"token punctuation\\\">=</span><span class=\\\"token punctuation\\\">\\\"</span>data:image/png;base64,iVBO...<span class=\\\"token punctuation\\\">\\\"</span></span> <span class=\\\"token punctuation\\\">/></span></span></code></pre>\\n      </div>\\n<p>Có thể đọc thêm trên docs của <code class=\\\"language-text\\\">file-loader</code> để xem cách chỉnh kích thước nào thì chuyển nội dung ảnh thành data URI. File loader còn thể thể xử lý trên một số dạng file khác nữa, chứ không chỉ là hình thôi không.</p>\\n<h2>Code splitting</h2>\\n<p>Trích từ trang chủ webpack</p>\\n<blockquote>\\n<p>Code splitting là một trong những tính năng hấp dẫn nhất của Webpack. Tính năng này cho phép bạn tách code ra thành nhiều file bundle để load khi cần thiết hoặc load xong xong. Cái này có thể dùng để giảm kích thước file bundle và kiểm soát được load resource hợp lý hơn, nếu sử dụng đúng cách, sẽ giảm đảng kể thời gian load trang</p>\\n</blockquote>\\n<p>Trước giờ chúng ta chỉ setup để bundle ra 1 file duy nhất từ <code class=\\\"language-text\\\">src/index.js</code> ra file <code class=\\\"language-text\\\">dist/bundle.js</code>. Khi ứng dúng phình ra, chúng ta cần tách code ra thành nhiều file, toàn bộ code đầu cần phải load hết ngay từ đầu đâu nhỉ? Dùng <a href=\\\"https://webpack.js.org/guides/code-splitting/\\\">Code Slitting</a> và <a href=\\\"https://webpack.js.org/guides/lazy-loading/\\\">Lazy Loading</a> để chỉ load khi cần.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-diff\\\"><code class=\\\"language-diff\\\">   const path = require('path')\\n\\n  module.exports = {\\n<span class=\\\"token deleted\\\">-   entry: './src/index.js',</span>\\n<span class=\\\"token inserted\\\">+   entry: {</span>\\n<span class=\\\"token inserted\\\">+     app: './src/app.js'</span>\\n<span class=\\\"token inserted\\\">+   },</span>\\n    output: {\\n<span class=\\\"token deleted\\\">-     filename: 'bundle.js',</span>\\n<span class=\\\"token inserted\\\">+     filename: '[name].bundle.js',</span>\\n      path: path.resolve(__dirname, 'dist')\\n    },\\n    ...\\n  }</code></pre>\\n      </div>\\n<p>Với setup như thế này, nếu chúng ta có 2 file trong thư mục <code class=\\\"language-text\\\">src</code> là <code class=\\\"language-text\\\">app.js</code> và <code class=\\\"language-text\\\">chat.js</code>, webpack sẽ bundle ra 2 file <code class=\\\"language-text\\\">chat.bundle.js</code>, <code class=\\\"language-text\\\">app.bundle.js</code></p>\\n<p>Bài sau nói tiếp plugins nhé, kết thúc với loaders ở đây</p>\\n<p><a href=\\\"https://www.sitepoint.com/beginners-guide-webpack-module-bundling/\\\">Link bài gốc</a>\\nTác giả: Mark Brown</p>\\n<p>Chỉnh sửa theo sự hiểu của mình một tí</p>\",\"id\":\"E:/anluu/luckyluu/posts/2018-05-27-huong-dan-webpack-4-cho-nguoi-moi-bat-dau/index.md absPath of file >>> MarkdownRemark\",\"timeToRead\":5,\"frontmatter\":{\"date\":\"2018-05-27T13:35:13.234Z\",\"path\":\"/2018-05-27-huong-dan-webpack-4-cho-nguoi-moi-bat-dau\",\"tags\":[\"javascript\",\"webpack\"],\"title\":\"Hướng dẫn webpack 4 cho người mới bắt đầu - Phần 2\"}}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3.json\n// module id = ./node_modules/json-loader/index.js!./.cache/json/2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3.json\n// module chunks = 42"],"sourceRoot":""}